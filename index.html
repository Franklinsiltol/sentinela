<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinela - An√°lise Inteligente de Conversas</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="logo">
                <div class="logo-icon">üõ°Ô∏è</div>
                <div class="logo-text">Sentinela</div>
            </div>
            
            <div class="sidebar-content">
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </h3>
                    <div class="input-group">
                        <label>Data Inicial</label>
                        <input type="date" id="startDate">
                    </div>
                    <div class="input-group">
                        <label>Data Final</label>
                        <input type="date" id="endDate">
                    </div>
                    <button class="button button-primary" id="applyFilter">
                        <i class="fas fa-filter"></i>
                        <span>Aplicar Filtro</span>
                    </button>
                </div>
                
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-database"></i>
                        <span>Fontes de Dados</span>
                    </h3>
                    <div class="input-group">
                        <label>Upload de Arquivo</label>
                        <input type="file" id="fileUpload" accept=".csv,.xlsx,.xls">
                    </div>
                    <div class="input-group">
                        <label>ID da Planilha Google</label>
                        <input type="text" id="sheetId" placeholder="ID da planilha">
                    </div>
                    <button class="button button-primary" id="loadData">
                        <i class="fas fa-sync-alt"></i>
                        <span>Carregar Dados</span>
                    </button>
                </div>
                
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-cogs"></i>
                        <span>Configura√ß√µes</span>
                    </h3>
                    <div class="input-group">
                        <label>
                            <input type="checkbox" id="enableIA" checked> 
                            Usar An√°lise de IA
                        </label>
                    </div>
                    <div class="input-group">
                        <label>Buscar Palavra</label>
                        <input type="text" id="searchWord" placeholder="Digite uma palavra...">
                    </div>
                </div>
                
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-chart-pie"></i>
                        <span>Estat√≠sticas</span>
                    </h3>
                    <div id="statsContainer">
                        <div class="metric-card">
                            <div class="metric-label">Total de Intera√ß√µes</div>
                            <div class="metric-value" id="statInteractions">0</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Total de Mensagens</div>
                            <div class="metric-value" id="statMessages">0</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Agentes √önicos</div>
                            <div class="metric-value" id="statAgents">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Header -->
        <div class="header" id="header">
            <div class="header-title">Painel de An√°lise</div>
            <div class="header-actions">
                <button class="button button-info" id="exportData">
                    <i class="fas fa-download"></i>
                    Exportar
                </button>
                <button class="button button-primary" id="refreshData">
                    <i class="fas fa-redo"></i>
                    Atualizar
                </button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <div id="loadingIndicator" class="loading">
                <div class="spinner"></div>
                <p>Carregando Sentinela...</p>
            </div>
            
            <div id="contentArea" class="hidden">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Bem-vindo ao Sentinela!</strong> Carregue seus dados para come√ßar a an√°lise.
                    </div>
                </div>
                
                <!-- M√©tricas Principais -->
                <div class="metrics-grid" id="metricsGrid">
                    <div class="metric-card">
                        <div class="metric-icon">üõ°Ô∏è</div>
                        <div class="metric-value" id="metricInteractions">0</div>
                        <div class="metric-label">Intera√ß√µes</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i>
                            <span>12% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üí¨</div>
                        <div class="metric-value" id="metricMessages">0</div>
                        <div class="metric-label">Mensagens</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i>
                            <span>8% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚úÖ</div>
                        <div class="metric-value" id="metricPositive">0</div>
                        <div class="metric-label">Positivas</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i>
                            <span>5% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚ö†Ô∏è</div>
                        <div class="metric-value" id="metricNegative">0</div>
                        <div class="metric-label">Negativas</div>
                        <div class="metric-trend trend-down">
                            <i class="fas fa-arrow-down"></i>
                            <span>3% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üîç</div>
                        <div class="metric-value" id="metricProblems">0</div>
                        <div class="metric-label">Problemas</div>
                        <div class="metric-trend trend-down">
                            <i class="fas fa-arrow-down"></i>
                            <span>7% vs per√≠odo anterior</span>
                        </div>
                    </div>
                </div>
                
                <!-- Abas -->
                <div class="tabs" id="mainTabs">
                    <div class="tab active" data-tab="overview">
                        <i class="fas fa-chart-bar"></i>
                        Vis√£o Geral
                    </div>
                    <div class="tab" data-tab="agents">
                        <i class="fas fa-users"></i>
                        Agentes
                    </div>
                    <div class="tab" data-tab="trends">
                        <i class="fas fa-chart-line"></i>
                        Tend√™ncias
                    </div>
                    <div class="tab" data-tab="words">
                        <i class="fas fa-font"></i>
                        An√°lise de Texto
                    </div>
                    <div class="tab" data-tab="ai">
                        <i class="fas fa-robot"></i>
                        IA Avan√ßada
                    </div>
                    <div class="tab" data-tab="audio">
                        <i class="fas fa-microphone"></i>
                        An√°lise de √Åudio
                    </div>
                </div>
                
                <!-- Conte√∫do das Abas -->
                <div id="tabContents">
                    <div class="tab-content active" id="overview">
                        <div class="charts-grid">
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-smile"></i>
                                    Distribui√ß√£o de Sentimento
                                </div>
                                <div id="sentimentChart"></div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-users"></i>
                                    Agentes com Mais Atendimentos
                                </div>
                                <div id="agentsChart"></div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-chart-pie"></i>
                                    An√°lise de Conte√∫do
                                </div>
                                <div id="contentChart"></div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-calendar-alt"></i>
                                    Evolu√ß√£o Temporal
                                </div>
                                <div id="temporalChart"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="agents">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Desempenho por Agente</div>
                                <button class="button button-info" id="exportAgents">
                                    <i class="fas fa-download"></i>
                                    Exportar Relat√≥rio
                                </button>
                            </div>
                            <div id="agentsTable"></div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="trends">
                        <div class="charts-grid">
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-chart-line"></i>
                                    M√©tricas ao Longo do Tempo
                                </div>
                                <div id="trendsChart"></div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-project-diagram"></i>
                                    Correla√ß√£o entre M√©tricas
                                </div>
                                <div id="correlationChart"></div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Dados Di√°rios</div>
                            </div>
                            <div id="dailyTable"></div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="words">
                        <div class="charts-grid">
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-cloud"></i>
                                    Nuvem de Palavras
                                </div>
                                <canvas id="wordCloud" width="600" height="300"></canvas>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-chart-bar"></i>
                                    Palavras Mais Frequentes
                                </div>
                                <div id="wordFrequencyChart"></div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Busca por Palavras</div>
                            </div>
                            <div class="input-group">
                                <input type="text" id="wordSearch" placeholder="Digite uma palavra para buscar...">
                            </div>
                            <div id="searchResults"></div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="ai">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">An√°lise com IA</div>
                            </div>
                            <div class="alert alert-info">
                                <i class="fas fa-robot"></i>
                                <div>
                                    <strong>An√°lise Inteligente</strong> - Use IA para obter insights avan√ßados sobre suas conversas.
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Prompt para An√°lise</label>
                                <textarea id="iaPrompt" rows="4">Analise as conversas e identifique os principais problemas, oportunidades de melhoria e pontos fortes:</textarea>
                            </div>
                            <div class="form-row">
                                <button class="button button-primary" id="generateInsights">
                                    <i class="fas fa-brain"></i>
                                    Gerar Insights
                                </button>
                                <button class="button button-info" id="quickAnalysis">
                                    <i class="fas fa-bolt"></i>
                                    An√°lise R√°pida
                                </button>
                            </div>
                            <div id="iaResults" class="mt-20"></div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Oportunidades Identificadas</div>
                            </div>
                            <div id="opportunitiesList"></div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="audio">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">An√°lise de √Åudio</div>
                            </div>
                            <div class="alert alert-info">
                                <i class="fas fa-microphone"></i>
                                <div>
                                    <strong>Transcri√ß√£o e An√°lise de √Åudio</strong> - Fa√ßa upload de arquivos de √°udio para transcri√ß√£o e an√°lise.
                                </div>
                            </div>
                            
                            <div class="section">
                                <h3 class="section-title">
                                    <i class="fas fa-upload"></i>
                                    Upload de √Åudio
                                </h3>
                                <div class="input-group">
                                    <input type="file" id="audioUpload" accept=".wav,.mp3,.m4a,.ogg">
                                </div>
                                <div id="audioInfo"></div>
                            </div>
                            
                            <div class="section">
                                <h3 class="section-title">
                                    <i class="fas fa-database"></i>
                                    Base de Conhecimento (Opcional)
                                </h3>
                                <div class="input-group">
                                    <input type="file" id="knowledgeUpload" accept=".csv,.xlsx,.txt">
                                </div>
                            </div>
                            
                            <div class="section">
                                <h3 class="section-title">
                                    <i class="fas fa-language"></i>
                                    Transcri√ß√£o
                                </h3>
                                <button class="button button-primary" id="transcribeAudio">
                                    <i class="fas fa-microphone-alt"></i>
                                    Transcrever √Åudio
                                </button>
                                <div id="transcriptionResults" class="mt-20"></div>
                            </div>
                            
                            <div class="section">
                                <h3 class="section-title">
                                    <i class="fas fa-robot"></i>
                                    An√°lise com IA
                                </h3>
                                <div class="input-group">
                                    <label>Prompt para An√°lise do √Åudio</label>
                                    <textarea id="audioPrompt" rows="4">Analise esta conversa transcrita e identifique os principais problemas, sentimentos e oportunidades:</textarea>
                                </div>
                                <button class="button button-primary" id="analyzeAudio">
                                    <i class="fas fa-search"></i>
                                    Analisar com IA
                                </button>
                                <div id="audioAnalysisResults" class="mt-20"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Configura√ß√µes -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Configura√ß√µes</div>
                <button class="modal-close" id="closeSettings">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>Stop Words (uma por linha)</label>
                    <textarea id="stopWords" rows="10"></textarea>
                </div>
                <div class="form-row">
                    <button class="button button-primary" id="saveSettings">
                        <i class="fas fa-save"></i>
                        Salvar Configura√ß√µes
                    </button>
                    <button class="button button-secondary" id="resetSettings">
                        <i class="fas fa-undo"></i>
                        Restaurar Padr√£o
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/sentiment-analyzer.js"></script>
    <script src="js/data-processor.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/audio-analyzer.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
