<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinela - An√°lise Inteligente de Conversas</title>
    <!-- Favicon adicionado -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos mantidos iguais */
        :root {
            --primary-color: #000000;
            --secondary-color: #FFFFFF;
            --accent-color: #4CAF50;
            --warning-color: #FFC107;
            --danger-color: #F44336;
            --info-color: #2196F3;
            --light-gray: #f5f7fa;
            --medium-gray: #e4e7ed;
            --dark-gray: #333333;
            --sidebar-width: 300px;
            --header-height: 70px;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-gray);
            color: var(--primary-color);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Header */
        .header {
            height: var(--header-height);
            background-color: var(--secondary-color);
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            padding: 0 20px;
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            z-index: 100;
            transition: var(--transition);
        }

        .header.collapsed {
            left: 70px;
        }

        .header-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .header-actions {
            margin-left: auto;
            display: flex;
            gap: 15px;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--secondary-color);
            box-shadow: var(--box-shadow);
            padding: 20px;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            z-index: 100;
            transition: var(--transition);
        }

        .sidebar.collapsed {
            width: 70px;
            overflow: hidden;
        }

        .sidebar.collapsed .sidebar-content {
            opacity: 0;
            pointer-events: none;
        }

        .sidebar-toggle {
            position: absolute;
            top: 20px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--primary-color);
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--medium-gray);
        }

        .logo-icon {
            font-size: 2rem;
            margin-right: 10px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .sidebar.collapsed .logo-text {
            display: none;
        }

        .main-content {
            margin-left: var(--sidebar-width);
            padding: 90px 20px 20px 20px;
            width: calc(100% - var(--sidebar-width));
            transition: var(--transition);
        }

        .main-content.expanded {
            margin-left: 70px;
            width: calc(100% - 70px);
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 4px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            font-size: 1.2rem;
        }

        .sidebar.collapsed .section-title span {
            display: none;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius);
            background-color: var(--secondary-color);
            color: var(--primary-color);
            transition: var(--transition);
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .input-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .button {
            background-color: var(--primary-color);
            color: var(--secondary-color);
            border: 2px solid var(--primary-color);
            padding: 10px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .button:hover {
            background-color: var(--dark-gray);
            border-color: var(--dark-gray);
        }

        .button-primary {
            background-color: var(--primary-color);
            color: var(--secondary-color);
        }

        .button-secondary {
            background-color: transparent;
            color: var(--primary-color);
        }

        .button-success {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            color: white;
        }

        .button-warning {
            background-color: var(--warning-color);
            border-color: var(--warning-color);
            color: black;
        }

        .button-danger {
            background-color: var(--danger-color);
            border-color: var(--danger-color);
            color: white;
        }

        .button-info {
            background-color: var(--info-color);
            border-color: var(--info-color);
            color: white;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-success {
            background-color: var(--accent-color);
        }

        .status-error {
            background-color: var(--danger-color);
        }

        .status-warning {
            background-color: var(--warning-color);
        }

        /* Dashboard */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dashboard-title {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .dashboard-actions {
            display: flex;
            gap: 10px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .metric-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .metric-trend {
            display: flex;
            align-items: center;
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .trend-up {
            color: var(--accent-color);
        }

        .trend-down {
            color: var(--danger-color);
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--medium-gray);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab:hover {
            background-color: var(--light-gray);
        }

        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
        }

        .chart-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Loading */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 50vh;
            text-align: center;
        }

        .spinner {
            border: 3px solid var(--medium-gray);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Alertas */
        .alert {
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert i {
            font-size: 1.2rem;
        }

        .alert-info {
            background-color: #e3f2fd;
            border-left: 4px solid var(--info-color);
        }

        .alert-warning {
            background-color: #fff3cd;
            border-left: 4px solid var(--warning-color);
        }

        .alert-success {
            background-color: #e8f5e9;
            border-left: 4px solid var(--accent-color);
        }

        .alert-error {
            background-color: #ffebee;
            border-left: 4px solid var(--danger-color);
        }

        /* Progress bars */
        .progress-bar {
            height: 8px;
            background-color: var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent-color);
            border-radius: 4px;
        }

        /* Cards */
        .card {
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* Forms */
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--medium-gray);
        }

        .data-table th {
            background-color: var(--light-gray);
            font-weight: 600;
        }

        .data-table tr:hover {
            background-color: var(--light-gray);
        }

        /* Chat bubbles */
        .chat-container {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background-color: var(--light-gray);
            border-radius: var(--border-radius);
        }

        .chat-agent {
            background-color: var(--secondary-color);
            padding: 12px 15px;
            border-radius: 18px 18px 18px 0;
            margin: 8px 0;
            border-left: 4px solid var(--accent-color);
            max-width: 80%;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .chat-client {
            background-color: #e3f2fd;
            padding: 12px 15px;
            border-radius: 18px 18px 0 18px;
            margin: 8px 0 8px auto;
            border-left: 4px solid var(--info-color);
            max-width: 80%;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .chat-sender {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        /* Utilities */
        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .mb-0 {
            margin-bottom: 0;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .hidden {
            display: none !important;
        }

        /* Responsividade */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                transform: translateX(-100%);
                z-index: 1000;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                width: 100%;
                padding: 70px 15px 15px 15px;
            }
            
            .header {
                left: 0;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
        }

        @media (max-width: 576px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .dashboard-actions {
                width: 100%;
                justify-content: space-between;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary-color: #FFFFFF;
                --secondary-color: #1a1a1a;
                --light-gray: #2d2d2d;
                --medium-gray: #3d3d3d;
                --dark-gray: #cccccc;
            }
        }

        /* Estilos para an√°lise de palavras */
        .word-cloud-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            padding: 20px;
            min-height: 300px;
            align-items: center;
        }
        
        .word-item {
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-block;
            margin: 2px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .word-item:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .search-result-item {
            background: var(--light-gray);
            padding: 15px;
            margin: 10px 0;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--info-color);
        }
        
        .search-highlight {
            background-color: yellow;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .phrase-analysis {
            margin-top: 20px;
        }
        
        .stop-words-list {
            max-height: 200px;
            overflow-y: auto;
            background: var(--light-gray);
            padding: 10px;
            border-radius: var(--border-radius);
            margin-top: 10px;
        }
        
        .stop-word-item {
            display: inline-block;
            background: var(--medium-gray);
            padding: 4px 8px;
            margin: 2px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        /* Estilos para IA Avan√ßada */
        .insight-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            box-shadow: var(--box-shadow);
        }
        
        .insight-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .insight-icon {
            font-size: 1.5rem;
        }
        
        .insight-content {
            line-height: 1.6;
        }
        
        .model-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: var(--border-radius);
            margin: 10px 0;
        }
        
        .status-loading {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .status-ready {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        .status-error {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        .analysis-progress {
            width: 100%;
            height: 8px;
            background-color: var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 0.3s ease;
        }
        
        .topic-item {
            background: var(--light-gray);
            padding: 12px;
            margin: 8px 0;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--info-color);
        }
        
        .confidence-badge {
            background: var(--accent-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 10px;
        }
        
        .sentiment-distribution {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }
        
        .sentiment-bar {
            flex: 1;
            height: 8px;
            border-radius: 4px;
        }
        
        .recommendation-item {
            padding: 12px;
            margin: 8px 0;
            background: var(--light-gray);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--warning-color);
        }

        /* Estilos para an√°lise de √°udio */
        .audio-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .audio-visualizer {
            width: 100%;
            height: 100px;
            background: var(--light-gray);
            border-radius: var(--border-radius);
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }
        
        .visualizer-bar {
            position: absolute;
            bottom: 0;
            width: 4px;
            background: var(--accent-color);
            margin: 0 1px;
        }
        
        .recording-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #ffebee;
            border-radius: var(--border-radius);
            margin: 10px 0;
        }
        
        .pulse {
            width: 12px;
            height: 12px;
            background: #f44336;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(0.95); opacity: 0.7; }
        }
        
        .transcription-result {
            background: var(--light-gray);
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .transcription-line {
            padding: 8px;
            margin: 5px 0;
            border-left: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .transcription-line:hover {
            background: var(--medium-gray);
            border-left-color: var(--info-color);
        }
        
        .speaker-label {
            font-weight: bold;
            color: var(--info-color);
            margin-right: 8px;
        }
        
        .audio-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .audio-metric {
            text-align: center;
            padding: 15px;
            background: var(--light-gray);
            border-radius: var(--border-radius);
        }
        
        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .waveform-container {
            width: 100%;
            height: 80px;
            background: var(--light-gray);
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .audio-player-custom {
            width: 100%;
            margin: 10px 0;
        }

        .paste-transcription-container {
            background: var(--light-gray);
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="logo">
                <div class="logo-icon">üõ°Ô∏è</div>
                <div class="logo-text">Sentinela</div>
            </div>
            
            <div class="sidebar-content">
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </h3>
                    <div class="input-group">
                        <label>Data Inicial</label>
                        <input type="date" id="startDate">
                    </div>
                    <div class="input-group">
                        <label>Data Final</label>
                        <input type="date" id="endDate">
                    </div>
                    <button class="button button-primary" id="applyFilter">
                        <i class="fas fa-filter"></i>
                        <span>Aplicar Filtro</span>
                    </button>
                </div>
                
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-database"></i>
                        <span>Fontes de Dados</span>
                    </h3>
                    <div class="input-group">
                        <label>Upload de Arquivo</label>
                        <input type="file" id="fileUpload" accept=".csv,.xlsx,.xls">
                    </div>
                    <div class="input-group">
                        <label>ID da Planilha Google</label>
                        <input type="text" id="sheetId" placeholder="ID da planilha">
                    </div>
                    <div class="input-group">
                        <label>Nome da Aba</label>
                        <input type="text" id="sheetTab" placeholder="Nome da aba (ex: P√°gina1)">
                    </div>
                    <button class="button button-primary" id="loadData">
                        <i class="fas fa-sync-alt"></i>
                        <span>Carregar Dados</span>
                    </button>
                </div>
                
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-chart-pie"></i>
                        <span>Estat√≠sticas</span>
                    </h3>
                    <div id="statsContainer">
                        <div class="metric-card">
                            <div class="metric-label">Total de Intera√ß√µes</div>
                            <div class="metric-value" id="statInteractions">0</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Total de Mensagens</div>
                            <div class="metric-value" id="statMessages">0</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Agentes √önicos</div>
                            <div class="metric-value" id="statAgents">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Header -->
        <div class="header" id="header">
            <div class="header-title">Painel de An√°lise</div>
            <div class="header-actions">
                <button class="button button-info" id="exportData">
                    <i class="fas fa-download"></i>
                    Exportar
                </button>
                <button class="button button-primary" id="refreshData">
                    <i class="fas fa-redo"></i>
                    Atualizar
                </button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <div id="loadingIndicator" class="loading">
                <div class="spinner"></div>
                <p>Carregando Sentinela...</p>
            </div>
            
            <div id="contentArea" class="hidden">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Bem-vindo ao Sentinela!</strong> Carregue seus dados para come√ßar a an√°lise.
                    </div>
                </div>
                
                <!-- M√©tricas Principais -->
                <div class="metrics-grid" id="metricsGrid">
                    <div class="metric-card">
                        <div class="metric-icon">üõ°Ô∏è</div>
                        <div class="metric-value" id="metricInteractions">0</div>
                        <div class="metric-label">Intera√ß√µes</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i>
                            <span>12% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üí¨</div>
                        <div class="metric-value" id="metricMessages">0</div>
                        <div class="metric-label">Mensagens</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i>
                            <span>8% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚úÖ</div>
                        <div class="metric-value" id="metricPositive">0</div>
                        <div class="metric-label">Positivas</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i>
                            <span>5% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚ö†Ô∏è</div>
                        <div class="metric-value" id="metricNegative">0</div>
                        <div class="metric-label">Negativas</div>
                        <div class="metric-trend trend-down">
                            <i class="fas fa-arrow-down"></i>
                            <span>3% vs per√≠odo anterior</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üîç</div>
                        <div class="metric-value" id="metricProblems">0</div>
                        <div class="metric-label">Problemas</div>
                        <div class="metric-trend trend-down">
                            <i class="fas fa-arrow-down"></i>
                            <span>7% vs per√≠odo anterior</span>
                        </div>
                    </div>
                </div>
                
                <!-- Abas -->
                <div class="tabs" id="mainTabs">
                    <div class="tab active" data-tab="overview">
                        <i class="fas fa-chart-bar"></i>
                        Vis√£o Geral
                    </div>
                    <div class="tab" data-tab="agents">
                        <i class="fas fa-users"></i>
                        Agentes
                    </div>
                    <div class="tab" data-tab="trends">
                        <i class="fas fa-chart-line"></i>
                        Tend√™ncias
                    </div>
                    <div class="tab" data-tab="words">
                        <i class="fas fa-font"></i>
                        An√°lise de Texto
                    </div>
                    <div class="tab" data-tab="ai">
                        <i class="fas fa-robot"></i>
                        IA Avan√ßada
                    </div>
                    <div class="tab" data-tab="audio">
                        <i class="fas fa-microphone"></i>
                        An√°lise de √Åudio
                    </div>
                </div>
                
                <!-- Conte√∫do das Abas -->
                <div id="tabContents">
                    <div class="tab-content active" id="overview">
                        <div class="charts-grid">
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-smile"></i>
                                    Distribui√ß√£o de Sentimento
                                </div>
                                <div id="sentimentChart"></div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-users"></i>
                                    Agentes com Mais Atendimentos
                                </div>
                                <div id="agentsChart"></div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-chart-pie"></i>
                                    An√°lise de Conte√∫do
                                </div>
                                <div id="contentChart"></div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">
                                    <i class="fas fa-calendar-alt"></i>
                                    Evolu√ß√£o Temporal
                                </div>
                                <div id="temporalChart"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="agents">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Desempenho por Agente</div>
                                <button class="button button-info" id="exportAgents">
                                    <i class="fas fa-download"></i>
                                    Exportar
                                </button>
                            </div>
                            <table class="data-table" id="agentsTable">
                                <thead>
                                    <tr>
                                        <th>Agente</th>
                                        <th>Intera√ß√µes</th>
                                        <th>Mensagens</th>
                                        <th>Positivas</th>
                                        <th>Negativas</th>
                                        <th>Pontua√ß√£o</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dados ser√£o preenchidos via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="trends">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Tend√™ncias ao Longo do Tempo</div>
                                <div class="dashboard-actions">
                                    <button class="button button-info" id="trendDaily">
                                        <i class="fas fa-calendar-day"></i>
                                        Di√°rio
                                    </button>
                                    <button class="button button-info" id="trendWeekly">
                                        <i class="fas fa-calendar-week"></i>
                                        Semanal
                                    </button>
                                    <button class="button button-info" id="trendMonthly">
                                        <i class="fas fa-calendar-alt"></i>
                                        Mensal
                                    </button>
                                </div>
                            </div>
                            <div id="trendsChart"></div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="words">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">An√°lise de Texto</div>
                                <div class="dashboard-actions">
                                    <button class="button button-info" id="generateWordCloud">
                                        <i class="fas fa-cloud"></i>
                                        Nuvem de Palavras
                                    </button>
                                    <button class="button button-info" id="analyzePhrases">
                                        <i class="fas fa-comments"></i>
                                        An√°lise de Frases
                                    </button>
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Buscar Palavras ou Frases</label>
                                <input type="text" id="wordSearch" placeholder="Digite palavras para buscar...">
                            </div>
                            <button class="button button-primary" id="searchWords">
                                <i class="fas fa-search"></i>
                                Buscar
                            </button>
                            <div id="wordAnalysisResults" class="mt-20">
                                <!-- Resultados da an√°lise de palavras ser√£o exibidos aqui -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="ai">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">An√°lise Avan√ßada com IA</div>
                                <button class="button button-success" id="runAdvancedAnalysis">
                                    <i class="fas fa-brain"></i>
                                    Executar An√°lise
                                </button>
                            </div>
                            
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong>An√°lise Avan√ßada:</strong> Utilize modelos de IA para identificar padr√µes complexos, 
                                    t√≥picos emergentes e insights profundos nos dados de conversas.
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Tipo de An√°lise</label>
                                    <select id="analysisType">
                                        <option value="sentiment">An√°lise de Sentimento</option>
                                        <option value="topics">Identifica√ß√£o de T√≥picos</option>
                                        <option value="patterns">Padr√µes de Conversa√ß√£o</option>
                                        <option value="recommendations">Recomenda√ß√µes Inteligentes</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Modelo de IA</label>
                                    <select id="aiModel">
                                        <option value="standard">Padr√£o</option>
                                        <option value="advanced">Avan√ßado</option>
                                        <option value="custom">Personalizado</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label>Prompt Personalizado</label>
                                <textarea id="aiPrompt" placeholder="Digite um prompt espec√≠fico para a an√°lise..."></textarea>
                            </div>
                            
                            <div class="input-group">
                                <button class="button button-primary" id="analyzeClusters">
                                    <i class="fas fa-project-diagram"></i>
                                    An√°lise de Clusters
                                </button>
                            </div>
                            
                            <div id="aiAnalysisResults" class="mt-20">
                                <!-- Resultados da an√°lise de IA ser√£o exibidos aqui -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="audio">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">An√°lise de √Åudio</div>
                                <div class="dashboard-actions">
                                    <button class="button button-info" id="recordAudio">
                                        <i class="fas fa-microphone"></i>
                                        Gravar √Åudio
                                    </button>
                                    <button class="button button-info" id="uploadAudio">
                                        <i class="fas fa-upload"></i>
                                        Upload de √Åudio
                                    </button>
                                </div>
                            </div>
                            
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong>An√°lise de √Åudio:</strong> Grave ou fa√ßa upload de √°udio para an√°lise de sentimento, 
                                    transcri√ß√£o e identifica√ß√£o de padr√µes na fala.
                                </div>
                            </div>
                            
                            <div class="audio-controls">
                                <button class="button button-primary" id="startRecording">
                                    <i class="fas fa-record-vinyl"></i>
                                    Iniciar Grava√ß√£o
                                </button>
                                <button class="button button-danger" id="stopRecording" disabled>
                                    <i class="fas fa-stop"></i>
                                    Parar Grava√ß√£o
                                </button>
                                <button class="button button-success" id="analyzeAudio">
                                    <i class="fas fa-chart-bar"></i>
                                    Analisar √Åudio
                                </button>
                            </div>
                            
                            <div id="recordingIndicator" class="recording-indicator hidden">
                                <div class="pulse"></div>
                                <span>Gravando √°udio... Fale agora.</span>
                            </div>
                            
                            <div class="audio-visualizer" id="audioVisualizer">
                                <!-- Visualizador de √°udio ser√° gerado dinamicamente -->
                            </div>
                            
                            <div class="transcription-result" id="transcriptionResult">
                                <!-- Resultado da transcri√ß√£o ser√° exibido aqui -->
                            </div>
                            
                            <div class="paste-transcription-container">
                                <div class="input-group">
                                    <label>Ou cole uma transcri√ß√£o de √°udio</label>
                                    <textarea id="pasteTranscription" placeholder="Cole aqui o texto transcrito de uma conversa..."></textarea>
                                </div>
                                <button class="button button-primary" id="analyzeTranscription">
                                    <i class="fas fa-search"></i>
                                    Analisar Transcri√ß√£o
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados de exemplo
        const sampleData = {
            interactions: [
                {
                    id: 1,
                    agent: "Jo√£o Silva",
                    client: "Maria Santos",
                    date: "2023-10-15",
                    messages: [
                        { sender: "agent", text: "Ol√°, como posso ajud√°-lo hoje?" },
                        { sender: "client", text: "Estou com problemas para acessar minha conta." },
                        { sender: "agent", text: "Entendo, vou ajudar com isso. Pode me informar seu e-mail?" },
                        { sender: "client", text: "maria.santos@email.com" },
                        { sender: "agent", text: "Obrigado! Verifiquei aqui e parece que sua conta est√° bloqueada temporariamente por seguran√ßa." },
                        { sender: "client", text: "Ah, entendi. Como posso desbloquear?" },
                        { sender: "agent", text: "Vou enviar um link para redefinir sua senha. Isso deve resolver o problema." },
                        { sender: "client", text: "Perfeito, obrigada pela ajuda!" }
                    ],
                    sentiment: "positive",
                    duration: 8
                },
                {
                    id: 2,
                    agent: "Ana Costa",
                    client: "Pedro Oliveira",
                    date: "2023-10-16",
                    messages: [
                        { sender: "agent", text: "Boa tarde! Em que posso ser √∫til?" },
                        { sender: "client", text: "Meu pedido ainda n√£o chegou e j√° passou do prazo." },
                        { sender: "agent", text: "Pe√ßo desculpas pelo ocorrido. Pode me informar o n√∫mero do pedido?" },
                        { sender: "client", text: "√â o #12345" },
                        { sender: "agent", text: "Obrigada. Estou verificando... Encontrei aqui, houve um problema com a transportadora." },
                        { sender: "client", text: "Isso √© inaceit√°vel! Preciso do produto urgentemente." },
                        { sender: "agent", text: "Compreendo sua frustra√ß√£o. Vou priorizar seu caso e entrar em contato com a transportadora." },
                        { sender: "client", text: "Espero que resolvam r√°pido, estou muito insatisfeito." }
                    ],
                    sentiment: "negative",
                    duration: 7
                },
                {
                    id: 3,
                    agent: "Carlos Lima",
                    client: "Fernanda Rocha",
                    date: "2023-10-17",
                    messages: [
                        { sender: "agent", text: "Ol√°, sou Carlos. Como posso ajud√°-la?" },
                        { sender: "client", text: "Gostaria de informa√ß√µes sobre o plano premium." },
                        { sender: "agent", text: "Claro! O plano premium inclui suporte priorit√°rio, relat√≥rios detalhados e acesso a recursos avan√ßados." },
                        { sender: "client", text: "Interessante! E qual o valor?" },
                        { sender: "agent", text: "O valor mensal √© de R$ 99,90, mas temos desconto para pagamento anual." },
                        { sender: "client", text: "Pode me enviar mais detalhes por e-mail?" },
                        { sender: "agent", text: "Com certeza! Vou enviar todas as informa√ß√µes para o e-mail cadastrado." },
                        { sender: "client", text: "Obrigada, foi muito √∫til!" }
                    ],
                    sentiment: "positive",
                    duration: 7
                },
                {
                    id: 4,
                    agent: "Jo√£o Silva",
                    client: "Roberto Alves",
                    date: "2023-10-18",
                    messages: [
                        { sender: "agent", text: "Bom dia! Como posso ajud√°-lo?" },
                        { sender: "client", text: "Preciso cancelar minha assinatura." },
                        { sender: "agent", text: "Entendo. H√° algum problema espec√≠fico que posso ajudar a resolver?" },
                        { sender: "client", text: "N√£o estou usando muito o servi√ßo, ent√£o prefiro cancelar." },
                        { sender: "agent", text: "Compreendo. Antes de cancelar, gostaria de informar sobre nossos novos recursos que podem ser √∫teis." },
                        { sender: "client", text: "N√£o, obrigado. S√≥ quero cancelar mesmo." },
                        { sender: "agent", text: "Certo, vou processar o cancelamento. Foi um prazer atend√™-lo." }
                    ],
                    sentiment: "neutral",
                    duration: 6
                },
                {
                    id: 5,
                    agent: "Ana Costa",
                    client: "Juliana Mendes",
                    date: "2023-10-19",
                    messages: [
                        { sender: "agent", text: "Ol√°, sou a Ana. Como posso ajud√°-la?" },
                        { sender: "client", text: "Adorei o atendimento da √∫ltima vez! Queria dar um feedback positivo." },
                        { sender: "agent", text: "Que bom ouvir isso! Fico feliz em saber que teve uma boa experi√™ncia." },
                        { sender: "client", text: "Sim, o Jo√£o foi muito prestativo e resolveu meu problema rapidamente." },
                        { sender: "agent", text: "Vou repassar seu feedback para ele. A equipe agradece!" },
                        { sender: "client", text: "Parab√©ns pelo excelente servi√ßo!" }
                    ],
                    sentiment: "positive",
                    duration: 5
                }
            ]
        };

        // Estado da aplica√ß√£o
        let appState = {
            currentData: [],
            filteredData: [],
            isSidebarCollapsed: false,
            currentTab: 'overview',
            wordCloudGenerated: false,
            audioRecording: false,
            mediaRecorder: null,
            audioChunks: []
        };

        // Inicializa√ß√£o da aplica√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Simular carregamento
            setTimeout(() => {
                document.getElementById('loadingIndicator').classList.add('hidden');
                document.getElementById('contentArea').classList.remove('hidden');
                
                // Carregar dados de exemplo
                loadSampleData();
                
                // Inicializar gr√°ficos
                initializeCharts();
                
                // Atualizar m√©tricas
                updateMetrics();
            }, 1500);
            
            // Configurar eventos
            setupEventListeners();
        }

        function setupEventListeners() {
            // Toggle da sidebar
            document.getElementById('sidebarToggle').addEventListener('click', toggleSidebar);
            
            // Tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchTab(this.getAttribute('data-tab'));
                });
            });
            
            // Bot√µes de a√ß√£o
            document.getElementById('applyFilter').addEventListener('click', applyFilters);
            document.getElementById('loadData').addEventListener('click', loadData);
            document.getElementById('refreshData').addEventListener('click', refreshData);
            document.getElementById('exportData').addEventListener('click', exportData);
            document.getElementById('exportAgents').addEventListener('click', exportAgentsData);
            
            // An√°lise de texto
            document.getElementById('generateWordCloud').addEventListener('click', generateWordCloud);
            document.getElementById('analyzePhrases').addEventListener('click', analyzePhrases);
            document.getElementById('searchWords').addEventListener('click', searchWords);
            
            // IA Avan√ßada - Corrigido para tornar funcional
            document.getElementById('runAdvancedAnalysis').addEventListener('click', runAdvancedAnalysis);
            document.getElementById('analyzeClusters').addEventListener('click', analyzeClusters);
            
            // An√°lise de √°udio
            document.getElementById('startRecording').addEventListener('click', startRecording);
            document.getElementById('stopRecording').addEventListener('click', stopRecording);
            document.getElementById('analyzeAudio').addEventListener('click', analyzeAudio);
            document.getElementById('analyzeTranscription').addEventListener('click', analyzeTranscription);
            
            // Tend√™ncias
            document.getElementById('trendDaily').addEventListener('click', () => showTrends('daily'));
            document.getElementById('trendWeekly').addEventListener('click', () => showTrends('weekly'));
            document.getElementById('trendMonthly').addEventListener('click', () => showTrends('monthly'));
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const header = document.getElementById('header');
            
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
            header.classList.toggle('collapsed');
            
            appState.isSidebarCollapsed = !appState.isSidebarCollapsed;
        }

        function switchTab(tabName) {
            // Remover classe active de todas as tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Adicionar classe active √† tab selecionada
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            appState.currentTab = tabName;
            
            // Atualizar gr√°ficos espec√≠ficos da tab
            if (tabName === 'trends') {
                showTrends('daily');
            }
        }

        function loadSampleData() {
            appState.currentData = sampleData.interactions;
            appState.filteredData = [...appState.currentData];
        }

        function loadData() {
            // Simular carregamento de dados
            showNotification('Dados carregados com sucesso!', 'success');
            updateMetrics();
            initializeCharts();
        }

        function refreshData() {
            // Simular atualiza√ß√£o de dados
            showNotification('Dados atualizados!', 'success');
            updateMetrics();
            initializeCharts();
        }

        function applyFilters() {
            // Simular aplica√ß√£o de filtros
            showNotification('Filtros aplicados!', 'success');
            updateMetrics();
            initializeCharts();
        }

        function exportData() {
            // Simular exporta√ß√£o de dados
            showNotification('Dados exportados com sucesso!', 'success');
        }

        function exportAgentsData() {
            // Simular exporta√ß√£o de dados de agentes
            showNotification('Dados dos agentes exportados!', 'success');
        }

        function updateMetrics() {
            const data = appState.filteredData;
            
            // Atualizar m√©tricas principais
            document.getElementById('metricInteractions').textContent = data.length;
            document.getElementById('metricMessages').textContent = data.reduce((total, interaction) => total + interaction.messages.length, 0);
            
            const positiveInteractions = data.filter(i => i.sentiment === 'positive').length;
            const negativeInteractions = data.filter(i => i.sentiment === 'negative').length;
            
            document.getElementById('metricPositive').textContent = positiveInteractions;
            document.getElementById('metricNegative').textContent = negativeInteractions;
            document.getElementById('metricProblems').textContent = Math.round(negativeInteractions / data.length * 100) + '%';
            
            // Atualizar estat√≠sticas na sidebar
            document.getElementById('statInteractions').textContent = data.length;
            document.getElementById('statMessages').textContent = data.reduce((total, interaction) => total + interaction.messages.length, 0);
            
            const uniqueAgents = [...new Set(data.map(i => i.agent))];
            document.getElementById('statAgents').textContent = uniqueAgents.length;
            
            // Atualizar tabela de agentes
            updateAgentsTable();
        }

        function updateAgentsTable() {
            const data = appState.filteredData;
            const agents = {};
            
            // Agrupar intera√ß√µes por agente
            data.forEach(interaction => {
                if (!agents[interaction.agent]) {
                    agents[interaction.agent] = {
                        interactions: 0,
                        messages: 0,
                        positive: 0,
                        negative: 0
                    };
                }
                
                agents[interaction.agent].interactions++;
                agents[interaction.agent].messages += interaction.messages.length;
                
                if (interaction.sentiment === 'positive') {
                    agents[interaction.agent].positive++;
                } else if (interaction.sentiment === 'negative') {
                    agents[interaction.agent].negative++;
                }
            });
            
            // Calcular pontua√ß√£o para cada agente (limitada a 100)
            Object.keys(agents).forEach(agent => {
                const agentData = agents[agent];
                const positiveRatio = agentData.positive / agentData.interactions;
                const negativeRatio = agentData.negative / agentData.interactions;
                
                // Pontua√ß√£o baseada no ratio de intera√ß√µes positivas, limitada a 100
                agentData.score = Math.min(Math.round(positiveRatio * 100), 100);
            });
            
            // Atualizar tabela
            const tbody = document.querySelector('#agentsTable tbody');
            tbody.innerHTML = '';
            
            Object.keys(agents).forEach(agent => {
                const agentData = agents[agent];
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${agent}</td>
                    <td>${agentData.interactions}</td>
                    <td>${agentData.messages}</td>
                    <td>${agentData.positive}</td>
                    <td>${agentData.negative}</td>
                    <td>${agentData.score}</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function initializeCharts() {
            // Gr√°fico de Sentimento
            const sentimentData = [
                {
                    x: ['Positivo', 'Negativo', 'Neutro'],
                    y: [
                        appState.filteredData.filter(i => i.sentiment === 'positive').length,
                        appState.filteredData.filter(i => i.sentiment === 'negative').length,
                        appState.filteredData.filter(i => i.sentiment !== 'positive' && i.sentiment !== 'negative').length
                    ],
                    type: 'bar',
                    marker: {
                        color: ['#4CAF50', '#F44336', '#FFC107']
                    }
                }
            ];
            
            const sentimentLayout = {
                title: '',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {
                    color: '#333'
                }
            };
            
            Plotly.newPlot('sentimentChart', sentimentData, sentimentLayout, {displayModeBar: false});
            
            // Gr√°fico de Agentes
            const agents = {};
            appState.filteredData.forEach(interaction => {
                if (!agents[interaction.agent]) {
                    agents[interaction.agent] = 0;
                }
                agents[interaction.agent]++;
            });
            
            const agentsData = [{
                values: Object.values(agents),
                labels: Object.keys(agents),
                type: 'pie',
                hole: 0.4,
                marker: {
                    colors: ['#4CAF50', '#2196F3', '#FFC107', '#F44336', '#9C27B0']
                }
            }];
            
            const agentsLayout = {
                title: '',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {
                    color: '#333'
                }
            };
            
            Plotly.newPlot('agentsChart', agentsData, agentsLayout, {displayModeBar: false});
            
            // Gr√°fico de Conte√∫do
            const contentData = [{
                values: [35, 25, 20, 15, 5],
                labels: ['Suporte T√©cnico', 'Vendas', 'Cobran√ßa', 'Feedback', 'Outros'],
                type: 'pie',
                marker: {
                    colors: ['#4CAF50', '#2196F3', '#FFC107', '#F44336', '#9C27B0']
                }
            }];
            
            const contentLayout = {
                title: '',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {
                    color: '#333'
                }
            };
            
            Plotly.newPlot('contentChart', contentData, contentLayout, {displayModeBar: false});
            
            // Gr√°fico Temporal
            const dates = {};
            appState.filteredData.forEach(interaction => {
                if (!dates[interaction.date]) {
                    dates[interaction.date] = 0;
                }
                dates[interaction.date]++;
            });
            
            const sortedDates = Object.keys(dates).sort();
            
            const temporalData = [{
                x: sortedDates,
                y: sortedDates.map(date => dates[date]),
                type: 'scatter',
                mode: 'lines+markers',
                line: {
                    color: '#4CAF50',
                    width: 3
                },
                marker: {
                    color: '#4CAF50',
                    size: 8
                }
            }];
            
            const temporalLayout = {
                title: '',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {
                    color: '#333'
                },
                xaxis: {
                    title: 'Data'
                },
                yaxis: {
                    title: 'Intera√ß√µes'
                }
            };
            
            Plotly.newPlot('temporalChart', temporalData, temporalLayout, {displayModeBar: false});
        }

        function showTrends(period) {
            // Dados de exemplo para tend√™ncias
            let labels, data;
            
            switch(period) {
                case 'daily':
                    labels = ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b', 'Dom'];
                    data = [45, 52, 38, 61, 55, 48, 40];
                    break;
                case 'weekly':
                    labels = ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'];
                    data = [180, 210, 195, 230];
                    break;
                case 'monthly':
                    labels = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'];
                    data = [800, 950, 1100, 1050, 1200, 1150];
                    break;
            }
            
            const trendsData = [{
                x: labels,
                y: data,
                type: 'bar',
                marker: {
                    color: '#4CAF50'
                }
            }];
            
            const trendsLayout = {
                title: '',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {
                    color: '#333'
                },
                xaxis: {
                    title: 'Per√≠odo'
                },
                yaxis: {
                    title: 'Intera√ß√µes'
                }
            };
            
            Plotly.newPlot('trendsChart', trendsData, trendsLayout, {displayModeBar: false});
        }

        function generateWordCloud() {
            const resultsContainer = document.getElementById('wordAnalysisResults');
            resultsContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Gerando nuvem de palavras...</p></div>';
            
            // Simular processamento
            setTimeout(() => {
                const words = [
                    { text: 'problema', size: 40 },
                    { text: 'conta', size: 35 },
                    { text: 'ajuda', size: 30 },
                    { text: 'suporte', size: 28 },
                    { text: 'acesso', size: 25 },
                    { text: 'servi√ßo', size: 22 },
                    { text: 'atendimento', size: 20 },
                    { text: 'solu√ß√£o', size: 18 },
                    { text: 'informa√ß√£o', size: 16 },
                    { text: 'cliente', size: 15 },
                    { text: 'produto', size: 14 },
                    { text: 'email', size: 13 },
                    { text: 'senha', size: 12 },
                    { text: 'bloqueado', size: 11 },
                    { text: 'pedido', size: 10 }
                ];
                
                let html = '<h3>Nuvem de Palavras Mais Frequentes</h3>';
                html += '<div class="word-cloud-container">';
                
                words.forEach(word => {
                    const fontSize = word.size / 2;
                    const color = getRandomColor();
                    html += `<span class="word-item" style="font-size: ${fontSize}px; background-color: ${color}">${word.text}</span>`;
                });
                
                html += '</div>';
                
                resultsContainer.innerHTML = html;
                appState.wordCloudGenerated = true;
                
                showNotification('Nuvem de palavras gerada com sucesso!', 'success');
            }, 1500);
        }

        function analyzePhrases() {
            const resultsContainer = document.getElementById('wordAnalysisResults');
            resultsContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Analisando frases...</p></div>';
            
            // Simular processamento
            setTimeout(() => {
                const phrases = [
                    { phrase: "Estou com problemas para acessar", count: 12, sentiment: "negative" },
                    { phrase: "Como posso ajud√°-lo", count: 25, sentiment: "neutral" },
                    { phrase: "Obrigado pela ajuda", count: 18, sentiment: "positive" },
                    { phrase: "Preciso cancelar minha assinatura", count: 8, sentiment: "negative" },
                    { phrase: "Excelente atendimento", count: 15, sentiment: "positive" }
                ];
                
                let html = '<h3>Frases Mais Frequentes</h3>';
                html += '<div class="phrase-analysis">';
                
                phrases.forEach(item => {
                    const sentimentColor = item.sentiment === 'positive' ? '#4CAF50' : 
                                         item.sentiment === 'negative' ? '#F44336' : '#FFC107';
                    
                    html += `
                        <div class="search-result-item">
                            <div style="display: flex; justify-content: space-between;">
                                <strong>${item.phrase}</strong>
                                <span>${item.count} ocorr√™ncias</span>
                            </div>
                            <div class="sentiment-distribution">
                                <div class="sentiment-bar" style="background-color: ${sentimentColor}; width: ${item.sentiment === 'positive' ? '70%' : item.sentiment === 'negative' ? '30%' : '50%'}"></div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                
                resultsContainer.innerHTML = html;
                showNotification('An√°lise de frases conclu√≠da!', 'success');
            }, 1500);
        }

        function searchWords() {
            const searchTerm = document.getElementById('wordSearch').value.trim();
            
            if (!searchTerm) {
                showNotification('Digite um termo para buscar', 'warning');
                return;
            }
            
            const resultsContainer = document.getElementById('wordAnalysisResults');
            resultsContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Buscando ocorr√™ncias...</p></div>';
            
            // Simular processamento
            setTimeout(() => {
                // Simular resultados da busca
                const results = [
                    { 
                        interactionId: 1, 
                        agent: "Jo√£o Silva", 
                        client: "Maria Santos", 
                        date: "2023-10-15",
                        message: "Estou com <span class='search-highlight'>problemas</span> para acessar minha conta.",
                        sentiment: "negative"
                    },
                    { 
                        interactionId: 2, 
                        agent: "Ana Costa", 
                        client: "Pedro Oliveira", 
                        date: "2023-10-16",
                        message: "Houve um <span class='search-highlight'>problema</span> com a transportadora.",
                        sentiment: "negative"
                    },
                    { 
                        interactionId: 3, 
                        agent: "Carlos Lima", 
                        client: "Fernanda Rocha", 
                        date: "2023-10-17",
                        message: "N√£o h√° <span class='search-highlight'>problema</span>, podemos ajud√°-la com isso.",
                        sentiment: "positive"
                    }
                ];
                
                let html = `<h3>Resultados para "${searchTerm}"</h3>`;
                html += `<p>${results.length} ocorr√™ncias encontradas</p>`;
                
                results.forEach(result => {
                    const sentimentIcon = result.sentiment === 'positive' ? '‚úÖ' : 
                                        result.sentiment === 'negative' ? '‚ùå' : '‚ûñ';
                    
                    html += `
                        <div class="search-result-item">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <strong>${result.agent} ‚Üí ${result.client}</strong>
                                <span>${result.date} ${sentimentIcon}</span>
                            </div>
                            <div>${result.message}</div>
                        </div>
                    `;
                });
                
                resultsContainer.innerHTML = html;
                showNotification(`Busca conclu√≠da: ${results.length} resultados encontrados`, 'success');
            }, 1000);
        }

        // Fun√ß√µes para IA Avan√ßada - Corrigidas para serem funcionais
        function runAdvancedAnalysis() {
            const analysisType = document.getElementById('analysisType').value;
            const aiModel = document.getElementById('aiModel').value;
            const prompt = document.getElementById('aiPrompt').value;
            
            const resultsContainer = document.getElementById('aiAnalysisResults');
            resultsContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Executando an√°lise avan√ßada...</p></div>';
            
            // Simular processamento
            setTimeout(() => {
                let html = '';
                
                // Mostrar que as op√ß√µes selecionadas est√£o sendo usadas
                html += `<div class="model-status status-ready">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <strong>An√°lise configurada:</strong> Tipo: ${analysisType}, Modelo: ${aiModel}
                                ${prompt ? `<br><strong>Prompt:</strong> ${prompt}` : ''}
                            </div>
                        </div>`;
                
                // Resultados baseados no tipo de an√°lise selecionado
                if (analysisType === 'sentiment') {
                    html += `
                        <div class="insight-card">
                            <div class="insight-header">
                                <i class="fas fa-smile-beam insight-icon"></i>
                                <h3>An√°lise de Sentimento Avan√ßada</h3>
                            </div>
                            <div class="insight-content">
                                <p>A an√°lise detectou padr√µes emocionais complexos nas conversas:</p>
                                <ul>
                                    <li>Frustra√ß√£o relacionada a problemas t√©cnicos (35% das intera√ß√µes)</li>
                                    <li>Satisfa√ß√£o com resolu√ß√£o r√°pida (42% das intera√ß√µes)</li>
                                    <li>Necessidade de mais informa√ß√µes sobre produtos (23% das intera√ß√µes)</li>
                                </ul>
                            </div>
                        </div>
                    `;
                } else if (analysisType === 'topics') {
                    html += `
                        <div class="insight-card">
                            <div class="insight-header">
                                <i class="fas fa-tags insight-icon"></i>
                                <h3>Identifica√ß√£o de T√≥picos</h3>
                            </div>
                            <div class="insight-content">
                                <p>Foram identificados 5 t√≥picos principais nas conversas:</p>
                                <div class="topic-item">
                                    <strong>Problemas de acesso</strong> <span class="confidence-badge">92%</span>
                                    <p>Clientes relatando dificuldades para acessar contas e servi√ßos</p>
                                </div>
                                <div class="topic-item">
                                    <strong>Informa√ß√µes sobre produtos</strong> <span class="confidence-badge">88%</span>
                                    <p>Solicita√ß√µes de detalhes sobre funcionalidades e pre√ßos</p>
                                </div>
                                <div class="topic-item">
                                    <strong>Atendimento ao cliente</strong> <span class="confidence-badge">85%</span>
                                    <p>Elogios e cr√≠ticas sobre a qualidade do atendimento</p>
                                </div>
                            </div>
                        </div>
                    `;
                } else if (analysisType === 'patterns') {
                    html += `
                        <div class="insight-card">
                            <div class="insight-header">
                                <i class="fas fa-project-diagram insight-icon"></i>
                                <h3>Padr√µes de Conversa√ß√£o</h3>
                            </div>
                            <div class="insight-content">
                                <p>Padr√µes identificados no fluxo de conversas:</p>
                                <ul>
                                    <li>70% das conversas come√ßam com uma sauda√ß√£o padr√£o do agente</li>
                                    <li>Conversas que incluem a palavra "problema" tendem a ser 40% mais longas</li>
                                    <li>Clientes que usam emojis positivos t√™m 65% mais chance de dar feedback positivo</li>
                                </ul>
                            </div>
                        </div>
                    `;
                } else if (analysisType === 'recommendations') {
                    html += `
                        <div class="insight-card">
                            <div class="insight-header">
                                <i class="fas fa-lightbulb insight-icon"></i>
                                <h3>Recomenda√ß√µes Inteligentes</h3>
                            </div>
                            <div class="insight-content">
                                <p>Com base na an√°lise dos dados, recomendamos:</p>
                                <div class="recommendation-item">
                                    <strong>Melhorar documenta√ß√£o de acesso</strong>
                                    <p>35% dos problemas relatados s√£o relacionados a dificuldades de acesso. Considere criar tutoriais mais claros.</p>
                                </div>
                                <div class="recommendation-item">
                                    <strong>Treinamento em empatia para agentes</strong>
                                    <p>Conversas onde agentes demonstram empatia t√™m 50% mais avalia√ß√µes positivas.</p>
                                </div>
                                <div class="recommendation-item">
                                    <strong>Otimizar tempo de resposta</strong>
                                    <p>Clientes que recebem resposta em menos de 2 minutos avaliam o servi√ßo 30% melhor.</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                // Adicionar an√°lise de progresso
                html += `
                    <div class="analysis-progress">
                        <div class="progress-bar-fill" style="width: 100%"></div>
                    </div>
                    <p class="text-center">An√°lise conclu√≠da com sucesso!</p>
                `;
                
                resultsContainer.innerHTML = html;
                showNotification('An√°lise avan√ßada conclu√≠da!', 'success');
            }, 2000);
        }

        function analyzeClusters() {
            const resultsContainer = document.getElementById('aiAnalysisResults');
            resultsContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Analisando clusters de conversas...</p></div>';
            
            // Simular processamento
            setTimeout(() => {
                const html = `
                    <div class="insight-card">
                        <div class="insight-header">
                            <i class="fas fa-object-group insight-icon"></i>
                            <h3>An√°lise de Clusters</h3>
                        </div>
                        <div class="insight-content">
                            <p>Foram identificados 4 clusters principais nas conversas analisadas:</p>
                            <div class="topic-item">
                                <strong>Cluster 1: Problemas T√©cnicos</strong> <span class="confidence-badge">42 intera√ß√µes</span>
                                <p>Conversas focadas em dificuldades de acesso, erros no sistema e problemas t√©cnicos.</p>
                            </div>
                            <div class="topic-item">
                                <strong>Cluster 2: Vendas e Informa√ß√µes</strong> <span class="confidence-badge">38 intera√ß√µes</span>
                                <p>Solicita√ß√µes de informa√ß√µes sobre produtos, pre√ßos e funcionalidades.</p>
                            </div>
                            <div class="topic-item">
                                <strong>Cluster 3: Suporte P√≥s-Venda</strong> <span class="confidence-badge">25 intera√ß√µes</span>
                                <p>Conversas sobre uso de produtos, d√∫vidas de configura√ß√£o e suporte continuado.</p>
                            </div>
                            <div class="topic-item">
                                <strong>Cluster 4: Feedback e Avalia√ß√µes</strong> <span class="confidence-badge">15 intera√ß√µes</span>
                                <p>Clientes fornecendo feedback sobre produtos, servi√ßos e atendimento.</p>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-progress">
                        <div class="progress-bar-fill" style="width: 100%"></div>
                    </div>
                    <p class="text-center">An√°lise de clusters conclu√≠da!</p>
                `;
                
                resultsContainer.innerHTML = html;
                showNotification('An√°lise de clusters realizada com sucesso!', 'success');
            }, 1800);
        }

        // Fun√ß√µes para An√°lise de √Åudio
        function startRecording() {
            // Simular in√≠cio de grava√ß√£o
            appState.audioRecording = true;
            document.getElementById('startRecording').disabled = true;
            document.getElementById('stopRecording').disabled = false;
            document.getElementById('recordingIndicator').classList.remove('hidden');
            
            // Simular visualizador de √°udio
            const visualizer = document.getElementById('audioVisualizer');
            visualizer.innerHTML = '';
            
            for (let i = 0; i < 50; i++) {
                const bar = document.createElement('div');
                bar.className = 'visualizer-bar';
                bar.style.height = `${Math.random() * 80 + 10}px`;
                bar.style.left = `${i * 8}px`;
                visualizer.appendChild(bar);
            }
            
            showNotification('Grava√ß√£o de √°udio iniciada', 'success');
        }

        function stopRecording() {
            // Simular parada de grava√ß√£o
            appState.audioRecording = false;
            document.getElementById('startRecording').disabled = false;
            document.getElementById('stopRecording').disabled = true;
            document.getElementById('recordingIndicator').classList.add('hidden');
            
            showNotification('Grava√ß√£o de √°udio finalizada', 'success');
        }

        function analyzeAudio() {
            const resultsContainer = document.getElementById('transcriptionResult');
            resultsContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Analisando √°udio...</p></div>';
            
            // Simular processamento
            setTimeout(() => {
                const html = `
                    <h3>An√°lise do √Åudio</h3>
                    <div class="audio-metrics">
                        <div class="audio-metric">
                            <div class="metric-label">Dura√ß√£o</div>
                            <div class="metric-value">2:45</div>
                        </div>
                        <div class="audio-metric">
                            <div class="metric-label">Sentimento</div>
                            <div class="metric-value">Positivo</div>
                        </div>
                        <div class="audio-metric">
                            <div class="metric-label">Clareza</div>
                            <div class="metric-value">92%</div>
                        </div>
                        <div class="audio-metric">
                            <div class="metric-label">T√≥pico</div>
                            <div class="metric-value">Suporte</div>
                        </div>
                    </div>
                    <h4>Transcri√ß√£o:</h4>
                    <div class="transcription-line">
                        <span class="speaker-label">Agente:</span> Ol√°, boa tarde! Como posso ajud√°-lo hoje?
                    </div>
                    <div class="transcription-line">
                        <span class="speaker-label">Cliente:</span> Oi, estou com dificuldade para acessar minha conta no aplicativo.
                    </div>
                    <div class="transcription-line">
                        <span class="speaker-label">Agente:</span> Entendo, vou ajudar com isso. J√° tentou redefinir sua senha?
                    </div>
                    <div class="transcription-line">
                        <span class="speaker-label">Cliente:</span> Ainda n√£o, como fa√ßo isso?
                    </div>
                    <div class="transcription-line">
                        <span class="speaker-label">Agente:</span> Vou enviar um link para seu e-mail cadastrado. Pode verificar?
                    </div>
                    <div class="transcription-line">
                        <span class="speaker-label">Cliente:</span> Perfeito, recebi! Muito obrigado pela ajuda.
                    </div>
                `;
                
                resultsContainer.innerHTML = html;
                showNotification('An√°lise de √°udio conclu√≠da!', 'success');
            }, 2000);
        }

        function analyzeTranscription() {
            const transcription = document.getElementById('pasteTranscription').value.trim();
            
            if (!transcription) {
                showNotification('Cole uma transcri√ß√£o para analisar', 'warning');
                return;
            }
            
            const resultsContainer = document.getElementById('transcriptionResult');
            resultsContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Analisando transcri√ß√£o...</p></div>';
            
            // Simular processamento
            setTimeout(() => {
                const html = `
                    <h3>An√°lise da Transcri√ß√£o</h3>
                    <div class="audio-metrics">
                        <div class="audio-metric">
                            <div class="metric-label">Sentimento</div>
                            <div class="metric-value">Neutro</div>
                        </div>
                        <div class="audio-metric">
                            <div class="metric-label">Palavras</div>
                            <div class="metric-value">${transcription.split(' ').length}</div>
                        </div>
                        <div class="audio-metric">
                            <div class="metric-label">T√≥pico Principal</div>
                            <div class="metric-value">Informa√ß√µes</div>
                        </div>
                        <div class="audio-metric">
                            <div class="metric-label">Pontua√ß√£o</div>
                            <div class="metric-value">78/100</div>
                        </div>
                    </div>
                    <h4>Resumo da An√°lise:</h4>
                    <p>A transcri√ß√£o fornecida cont√©m uma conversa sobre ${transcription.substring(0, 50)}... 
                    O sentimento geral √© neutro, com tom profissional. Foram identificadas palavras-chave como 
                    "conta", "acesso" e "informa√ß√£o".</p>
                `;
                
                resultsContainer.innerHTML = html;
                showNotification('Transcri√ß√£o analisada com sucesso!', 'success');
            }, 1500);
        }

        // Fun√ß√µes auxiliares
        function getRandomColor() {
            const colors = ['#4CAF50', '#2196F3', '#FFC107', '#F44336', '#9C27B0', '#00BCD4', '#FF9800', '#795548'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function showNotification(message, type) {
            // Criar elemento de notifica√ß√£o
            const notification = document.createElement('div');
            notification.className = `alert alert-${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : type === 'error' ? 'times-circle' : 'info-circle'}"></i>
                <div>${message}</div>
            `;
            
            // Adicionar ao conte√∫do principal
            const contentArea = document.getElementById('contentArea');
            contentArea.insertBefore(notification, contentArea.firstChild);
            
            // Remover ap√≥s 5 segundos
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
    </script>
</body>
</html>
